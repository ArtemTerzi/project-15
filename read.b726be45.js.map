{"mappings":"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","sources":["src/js/read.js"],"sourcesContent":["\n// =======================  FOR TEST ==============================\nconst URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=MCCbLUuNkLgrOf1uBr1c9zmSoKm3Mp9g`;\nconst btnFetch = document.querySelector('.test-fetch');\n\nbtnFetch.addEventListener('click', onOpenNews);\n\nasync function onFetch() {\ntry {\n    const response = await fetch(URL);\n    const newsAll = await response.json();\n    return newsAll;\n\n    } catch(err) {\n\n    console.log(err);\n    };\n};\n\nasync function onOpenNews() {\n    try {\n        \n    const newsAll = await onFetch();\n    makeNews(newsAll.response.docs);\n\n    } catch(error) {\n        console.log(error);\n    };\n};\n\nfunction makeNews(arrNews) {\n    const markapNews = arrNews.map(({ abstract, web_url, pub_date, snippet }) => \n        `<li class=\"li-news\">\n        <h2 class=\"title-news\">${abstract}</h2>\n        <p class=\"text\">${snippet}</p>\n        <p class=\"data\">${pub_date}</p>\n        <a href=\"${web_url}\" class=\"link-news\">\n            Read more...\n        </a>\n    </li>`).join('');\n    listNews.insertAdjacentHTML('beforeend',markapNews);\n\n};\n\n// =======================  FOR TEST ==============================\n\nconst KEY_LOCAL_STORAGE = 'read-news-storage';\nconst listNews = document.querySelector('.list-news');\nlistNews.addEventListener('click', onBtnReadMore);\n\nfunction createNewData() {\n    return new Date(Date.now()).toLocaleString().split(',')[0];\n};\n\n\n\nfunction onBtnReadMore(e) {\n    // =======================  FOR TEST ==============================\n    e.preventDefault();\n    // =======================  FOR TEST ==============================\n\n    if(e.target.nodeName !== 'A') {\n        return;\n    };\n\n    const dateReadNews = createNewData();\n    const stringMarkupNews = (e.target.parentNode.innerHTML.trim());\n    \n    try {\n        const getObjLocalStorage = JSON.parse(localStorage.getItem(KEY_LOCAL_STORAGE));\n\n        if(getObjLocalStorage !== null) {\n            if(Object.keys(getObjLocalStorage).includes(dateReadNews)) {\n\n                if(getObjLocalStorage[dateReadNews].includes(stringMarkupNews)) {\n                    return;\n                };\n\n                getObjLocalStorage[dateReadNews].push(stringMarkupNews);\n                localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify(getObjLocalStorage));\n\n            } else {\n                getObjLocalStorage[dateReadNews] = [stringMarkupNews];\n                localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify(getObjLocalStorage));\n\n            };\n\n        }  else {\n\n            const obgDataPlusMarkup = {};\n            obgDataPlusMarkup[dateReadNews] = [stringMarkupNews];\n            console.log(obgDataPlusMarkup);\n\n            localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify(obgDataPlusMarkup));\n        };\n\n    } catch(err) {\n        console.log('err parse');\n    }\n};\n\n\nconst btnReadPage = document.querySelector('.read-page');\n\nbtnReadPage.addEventListener('click', makeMarkapPageRead);\n\nconst listReadNews = document.querySelector('.list-read-news');\n\n\nfunction makeMarkapPageRead() {\n    try {\n        const resultLocalStorage = JSON.parse(localStorage.getItem(KEY_LOCAL_STORAGE));\n        // console.log(resultLocalStorage);\n        // let arrAllNewsReadForPage = Object.kays(resultLocalStorage);\n\n        // const markapPageRead = arrAllNewsReadForPage.map(date => {\n        //     console.log(date);\n            \n        //     // return arrDate.map(elementsOneNewsRead => `<li>${elementsOneNewsRead}</li>`).join();\n        // });\n        for (key in resultLocalStorage) {\n            const dataTitle = `<li class=\"list-date\">${key}<ul class=\"list-date-read visually-hidden\"></ul></li>`;\n            listReadNews.insertAdjacentHTML('beforeend', dataTitle);\n            const itemDateRead = document.querySelector('.list-date');\n            const listDateRead = document.querySelector('.list-date-read');\n            // console.log(listDateRead);\n            // const arrForMarkupReadPage = resultLocalStorage[key].map(newsRead => `<li>${newsRead}</li>`).join();\n            \n            for (let i = 0; i < resultLocalStorage[key].length; i += 1) {\n                const element = resultLocalStorage[key][i];\n                console.log(element);\n\n                const arrForMarkupReadPage = `<li class=\"li-news\">${element}</li>`;\n                listDateRead.insertAdjacentHTML('beforeend', arrForMarkupReadPage);\n            }\n\n            // listDateRead.insertAdjacentHTML('beforeend', arrForMarkupReadPage);\n\n            // itemDateRead.addEventListener('click', openListsReadNews);\n        \n            function openListsReadNews(e) {\n                e.target.firstElementChild.classList.toggle('visually-hidden');\n            }\n        };\n\n        // console.log(markapPageRead);\n        // listReadNews.insertAdjacentHTML('beforeend', markapPageRead);\n    } catch(err) {\n        console.log(err);\n    }\n};\n\n\n\nlistReadNews.addEventListener('click', openListsReadNews);\n        \nfunction openListsReadNews(e) {\n\n    if(e.target.nodeName !== 'LI') {\n        return;\n    };\n\n    const listDateRead = e.target.children;\n\nfor (const element of listDateRead) {\n    element.classList.toggle(\"visually-hidden\");\n}\n};"],"names":["$bpxeT","parcelRequire","$95b4463fc8ac9448$var$URL","$95b4463fc8ac9448$var$onFetch","$95b4463fc8ac9448$var$_onFetch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","newsAll","fetch","_ctx","sent","json","console","log","t0","$95b4463fc8ac9448$var$_onOpenNews","$95b4463fc8ac9448$var$makeNews","docs","arrNews","markapNews","map","param","abstract","web_url","pub_date","snippet","concat","join","$95b4463fc8ac9448$var$listNews","insertAdjacentHTML","document","querySelector","addEventListener","$95b4463fc8ac9448$var$KEY_LOCAL_STORAGE","e","preventDefault","target","nodeName","dateReadNews","Date","now","toLocaleString","split","stringMarkupNews","parentNode","innerHTML","trim","getObjLocalStorage","JSON","parse","localStorage","getItem","Object","keys","includes","push","setItem","stringify","obgDataPlusMarkup","err","dataTitle","key","$95b4463fc8ac9448$var$listReadNews","listDateRead","i","resultLocalStorage","length","element","arrForMarkupReadPage","_loop","children","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","classList","toggle","return"],"version":3,"file":"read.b726be45.js.map"}