{"mappings":"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","sources":["src/js/read.js"],"sourcesContent":["\n// =======================  FOR TEST ==============================\nconst URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=MCCbLUuNkLgrOf1uBr1c9zmSoKm3Mp9g`;\nconst btnFetch = document.querySelector('.test-fetch');\n\nbtnFetch.addEventListener('click', onOpenNews);\n\nasync function onFetch() {\ntry {\n    const response = await fetch(URL);\n    const newsAll = await response.json();\n    return newsAll;\n\n    } catch(err) {\n\n    console.log(err);\n    };\n};\n\nasync function onOpenNews() {\n    try {\n        \n    const newsAll = await onFetch();\n    makeNews(newsAll.response.docs);\n\n    } catch(error) {\n        console.log(error);\n    };\n};\n\nfunction makeNews(arrNews) {\n     \n    try {\n        const markapNews = arrNews.map(({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n        `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://www.nytimes.com/${multimedia[2].url}\" alt=\"${keywords[0].value}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${new Date(pub_date).toLocaleString().split(',')[0]}</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`).join('');\n        listNews.insertAdjacentHTML('beforeend',markapNews);\n    } catch(err) {\n        const markapNews = arrNews.map(({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n        `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://cdn.pixabay.com/photo/2015/02/15/09/33/news-636978_960_720.jpg\" alt=\"${keywords[0].value}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${new Date(pub_date).toLocaleString().split(',')[0]}</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`).join('');\n        listNews.insertAdjacentHTML('beforeend',markapNews);\n    }\n};\n\n// =======================  FOR TEST ==============================\n\nconst KEY_LOCAL_STORAGE = 'read-news-local-storage';\nconst listNews = document.querySelector('.list-news');\n\n\n\nfunction createNewData() {\n    return new Date(Date.now()).toLocaleString().split(',')[0];\n};\n\n\nlistNews.addEventListener('click', onBtnReadMore);\n\nfunction onBtnReadMore(e) {\n    // =======================  FOR TEST ==============================\n    e.preventDefault();\n    // =======================  FOR TEST ==============================\n\n    if(e.target.nodeName !== 'A') {\n        return;\n    };\n\n    // makeObjectNews(e);\n    let newsCard = e.target.parentNode.parentNode;\n    let img = newsCard.querySelector('.news-item__img').src;\n    let alt = newsCard.querySelector('.news-item__img').alt;\n    let title = newsCard.querySelector('.news-item__title').textContent;\n    let text = newsCard.querySelector('.news-item__text').textContent;\n    let date = newsCard.querySelector('.news-item__date').textContent;\n    let link = newsCard.querySelector('.news-item__link').href;\n    let dateOfRead = createNewData();\n\n    const newsObj = {\n        img,\n        alt,\n        title,\n        text,\n        date,\n        link,\n    \n        isFavourite: false,\n        isRead: true,\n        dateOfRead,\n      };\n\n    try {\n        const newsAllLocalStorage = JSON.parse(localStorage.getItem(KEY_LOCAL_STORAGE));\n\n\n        if(newsAllLocalStorage === null) {\n\n            localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify([newsObj]));\n            return;\n        };\n        \n        if (newsAllLocalStorage !== null) {\n\n            for (const news of newsAllLocalStorage) {\n                \n                if(news.link === newsObj.link) {\n                    news.dateOfRead = dateOfRead;\n                    return;\n                }\n            };\n\n            newsAllLocalStorage.push(newsObj);\n            localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify(newsAllLocalStorage));\n        };\n\n    } catch(error) {\n\n        console.log('Error parse date local storage');\n    }\n};\n\nconst btnReadPage = document.querySelector('.read-page');\nconst listReadNews = document.querySelector('.readPage-list');\n\nbtnReadPage.addEventListener('click', makeArrNewsForPageRead);\n\nfunction makeArrNewsForPageRead() {\n\n    try {\n\n        const newsAllGetLocalStorage = JSON.parse(localStorage.getItem(KEY_LOCAL_STORAGE));\n        // console.log(newsAllGetLocalStorage);\n        \n        const arrNewsIsRead = newsAllGetLocalStorage.reduce((arrNews, news) => {\n\n            if (news.isRead) {\n                arrNews.push(news);\n            };\n\n            return arrNews;\n        }, []);\n\n\n        makeMarkapPageRead(arrNewsIsRead);\n\n\n    } catch (error) {\n        \n    }\n};\n\nfunction makeMarkapPageRead(arrayNewsRead) {\n\n\n    const allDates = arrayNewsRead.flatMap(newsRead => newsRead.dateOfRead).\n    filter((date, idx, arr) => arr.indexOf(date) === idx);\n\n\n    const markapDatesRead = allDates.map(data => \n            `<li class=\"readPage-list__item\">${data}<ul class=\"readPage-list__list\"></ul></li>`)\n            .join('');\n\n    listReadNews.insertAdjacentHTML('beforeend', markapDatesRead);\n    listReadNews.addEventListener('click', openListNews);\n\n    function openListNews(e) {\n\n        if(e.target.nodeName !== 'LI') {\n            return;\n        };\n\n        const cardDateRead = e.target;\n\n        const markapNewsAndDatesRead = arrayNewsRead.map(news => {\n            if(cardDateRead.textContent === news.dateOfRead) {\n\n        return `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"${news.img}\" alt=\"${news.alt}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${news.title}</h2>\n          <p class=\"news-item__text\">${news.text}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${news.date}</p>\n          <a href=\"${news.link}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`;\n            };\n        });\n\n        cardDateRead.firstElementChild.insertAdjacentHTML('beforeend', markapNewsAndDatesRead); \n\n};\n\n};\n\n// function openListsReadNews(e) {\n//  cardDateRead.firstElementChild.classList.toggle('visually-hidden');\n// };"],"names":["$bpxeT","parcelRequire","$95b4463fc8ac9448$var$URL","$95b4463fc8ac9448$var$onFetch","$95b4463fc8ac9448$var$_onFetch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","newsAll","fetch","_ctx","sent","json","console","log","t0","$95b4463fc8ac9448$var$_onOpenNews","$95b4463fc8ac9448$var$makeNews","docs","arrNews","markapNews","map","param","headline","web_url","pub_date","snippet","multimedia","keywords","concat","url","value","main","Date","toLocaleString","split","join","$95b4463fc8ac9448$var$listNews","insertAdjacentHTML","err","markapNews1","document","querySelector","addEventListener","$95b4463fc8ac9448$var$KEY_LOCAL_STORAGE","e","preventDefault","target","nodeName","newsCard","parentNode","img","src","alt","title","textContent","text","date","link","href","dateOfRead","now","newsObj","isFavourite","isRead","newsAllLocalStorage","JSON","parse","localStorage","getItem","setItem","stringify","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","news","return","push","error","$95b4463fc8ac9448$var$btnReadPage","$95b4463fc8ac9448$var$listReadNews","arrayNewsRead","markapDatesRead","flatMap","newsRead","filter","idx","arr","indexOf","data","openListNews","cardDateRead","markapNewsAndDatesRead","firstElementChild","$95b4463fc8ac9448$var$makeMarkapPageRead","reduce"],"version":3,"file":"read.ba09d642.js.map"}