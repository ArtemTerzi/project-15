{"mappings":"AASA,MAAMA,EAAM,oGACKC,SAASC,cAAc,eAE/BC,iBAAiB,SAY1BC,iBACE,KAQF,SAAkBC,GAChB,IACE,MAAMC,EAAaD,EAChBE,KACC,EAACC,SAAEA,EAAQC,QAAEA,EAAOC,SAAEA,EAAQC,QAAEA,EAAOC,WAAEA,EAAUC,SAAEA,KACnD,4FAEAD,EAAW,GAAGE,aACND,EAAS,GAAGE,gUAMWP,EAASQ,mDACXL,8GAI3B,IAAIM,KAAKP,GAAUQ,iBAAiBC,MAAM,KAAK,8BAEtCV,4EAIdW,KAAK,IACRC,EAASC,mBAAmB,YAAahB,E,CACzC,MAAOiB,GACP,MAAMjB,EAAaD,EAChBE,KACC,EAACC,SAAEA,EAAQC,QAAEA,EAAOC,SAAEA,EAAQC,QAAEA,EAAOC,WAAEA,EAAUC,SAAEA,KACnD,iJAEAA,EAAS,GAAGE,gUAOmBP,EAASQ,mDACXL,8GAI3B,IAAIM,KAAKP,GAAUQ,iBAAiBC,MAAM,KAAK,8BAEtCV,4EAIdW,KAAK,IACRC,EAASC,mBAAmB,YAAahB,E,EA1DzCkB,QAbJpB,iBACE,IACE,MAAMqB,QAAiBC,MAAM1B,GAE7B,aADsByB,EAASE,M,CAE/B,MAAOJ,GACPK,QAAQC,IAAIN,E,EAMUO,IACLL,SAASM,K,CAC1B,MAAOC,GACPJ,QAAQC,IAAIG,E,KA8DhB,MACMX,EAAWpB,SAASC,cAAc,cAMxCmB,EAASlB,iBAAiB,SAE1B,SAAuB8B,GAKrB,GAHAA,EAAEC,iBAGwB,MAAtBD,EAAEE,OAAOC,SACX,OAIF,IAAIC,EAAWJ,EAAEE,OAAOG,WAAWA,WAC/BC,EAAMF,EAASnC,cAAc,mBAAmBsC,IAChDC,EAAMJ,EAASnC,cAAc,mBAAmBuC,IAChDC,EAAQL,EAASnC,cAAc,qBAAqByC,YACpDC,EAAOP,EAASnC,cAAc,oBAAoByC,YAClDE,EAAOR,EAASnC,cAAc,oBAAoByC,YAClDG,EAAOT,EAASnC,cAAc,oBAAoB6C,KAClDC,EAtBG,IAAI/B,KAAKA,KAAKgC,OAAO/B,iBAAiBC,MAAM,KAAK,GAwBxD,MAAM+B,EAAU,C,IACdX,E,IACAE,E,MACAC,E,KACAE,E,KACAC,E,KACAC,EAEAK,YAAY,EACZC,QAAQ,E,WACRJ,GAGF,IACE,MAAMK,EAAsBC,KAAKC,MAC/BC,aAAaC,QA3CO,4BA8CtB,GAA4B,OAAxBJ,EAEF,YADAG,aAAaE,QA/CO,0BA+CoBJ,KAAKK,UAAU,CAACT,KAI1D,GAA4B,OAAxBG,EAA8B,CAChC,IAAK,MAAMO,KAAQP,EACjB,GAAIO,EAAKd,OAASI,EAAQJ,KAExB,YADAc,EAAKZ,WAAaA,GAKtBK,EAAoBQ,KAAKX,GACzBM,aAAaE,QA5DO,0BA8DlBJ,KAAKK,UAAUN,G,EAGnB,MAAOrB,GACPJ,QAAQC,IAAI,iC,KAIhB,MAAMiC,EAAc7D,SAASC,cAAc,cACrC6D,EAAe9D,SAASC,cAAc,kBAE5C4D,EAAY3D,iBAAiB,SAE7B,WACE,IACE,MAAM6D,EAAyBV,KAAKC,MAClCC,aAAaC,QA9EO,6BAiG1B,SAA4BQ,GAC1B,MAIMC,EAJWD,EACdE,SAAQC,GAAYA,EAASpB,aAC7BqB,QAAO,CAACxB,EAAMyB,EAAKC,IAAQA,EAAIC,QAAQ3B,KAAUyB,IAGjD/D,KACCkE,GACE,mCAAmCA,gDAEtCrD,KAAK,IAKR,SAASsD,EAAazC,GACpB,GAA0B,OAAtBA,EAAEE,OAAOC,SACX,OAGF,MAAMuC,EAAe1C,EAAEE,OAEjByC,EAAyBX,EAAc1D,KAAIqD,IAC/C,GAAIe,EAAahC,cAAgBiB,EAAKZ,WACpC,MAAO,oEAC4BY,EAAKrB,aAAaqB,EAAKnB,8TAMzBmB,EAAKlB,oDACPkB,EAAKhB,iHAGLgB,EAAKf,gCACvBe,EAAKd,4EAEZ,IAIV6B,EAAaE,kBAAkBvD,mBAC7B,YACAsD,E,CAhCJb,EAAazC,mBAAmB,YAAa4C,GAC7CH,EAAa5D,iBAAiB,QAASuE,E,CApBrCI,CARsBd,EAAuBe,QAAO,CAAC1E,EAASuD,KACxDA,EAAKR,QACP/C,EAAQwD,KAAKD,GAGRvD,IACN,I,CAGH,MAAO2B,GACW/B,SAASC,cAAc,cAC/B8E,UCvLL,sxB","sources":["src/js/read.js","src/js/error.js"],"sourcesContent":["import { getMarkupError } from './error';\nimport { isFavoriteForStyle, isReadForStyle } from './favoriteReadStyles';\n// isReadForStyle(\"https://www.nytimes.com/2023/03/06/travel/taliesin-frank-lloyd-wright-wisconsin-baking-class.html\");\n// isReadForStyle(\"https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByPages\");\n// isFavoriteForStyle(\"https://www.nytimes.com/2023/03/06/travel/taliesin-frank-lloyd-wright-wisconsin-baking-class.html\");\n// isReadForStyle(\"https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByPages\");\n\n// =======================  FOR TEST ==============================\n\nconst URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=MCCbLUuNkLgrOf1uBr1c9zmSoKm3Mp9g`;\nconst btnFetch = document.querySelector('.test-fetch');\n\nbtnFetch.addEventListener('click', onOpenNews);\n\nasync function onFetch() {\n  try {\n    const response = await fetch(URL);\n    const newsAll = await response.json();\n    return newsAll;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onOpenNews() {\n  try {\n    const newsAll = await onFetch();\n    makeNews(newsAll.response.docs);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction makeNews(arrNews) {\n  try {\n    const markapNews = arrNews\n      .map(\n        ({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n          `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://www.nytimes.com/${\n          multimedia[2].url\n        }\" alt=\"${keywords[0].value}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${\n            new Date(pub_date).toLocaleString().split(',')[0]\n          }</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`\n      )\n      .join('');\n    listNews.insertAdjacentHTML('beforeend', markapNews);\n  } catch (err) {\n    const markapNews = arrNews\n      .map(\n        ({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n          `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://cdn.pixabay.com/photo/2015/02/15/09/33/news-636978_960_720.jpg\" alt=\"${\n          keywords[0].value\n        }\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${\n            new Date(pub_date).toLocaleString().split(',')[0]\n          }</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`\n      )\n      .join('');\n    listNews.insertAdjacentHTML('beforeend', markapNews);\n  }\n}\n\n// =======================  FOR TEST ==============================\n\nconst KEY_LOCAL_STORAGE = 'read-news-local-storage';\nconst listNews = document.querySelector('.list-news');\n\nfunction createNewData() {\n  return new Date(Date.now()).toLocaleString().split(',')[0];\n}\n\nlistNews.addEventListener('click', onBtnReadMore);\n\nfunction onBtnReadMore(e) {\n  // =======================  FOR TEST ==============================\n  e.preventDefault();\n  // =======================  FOR TEST ==============================\n\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n  // makeObjectNews(e);\n  let newsCard = e.target.parentNode.parentNode;\n  let img = newsCard.querySelector('.news-item__img').src;\n  let alt = newsCard.querySelector('.news-item__img').alt;\n  let title = newsCard.querySelector('.news-item__title').textContent;\n  let text = newsCard.querySelector('.news-item__text').textContent;\n  let date = newsCard.querySelector('.news-item__date').textContent;\n  let link = newsCard.querySelector('.news-item__link').href;\n  let dateOfRead = createNewData();\n\n  const newsObj = {\n    img,\n    alt,\n    title,\n    text,\n    date,\n    link,\n\n    isFavorite: false,\n    isRead: true,\n    dateOfRead,\n  };\n\n  try {\n    const newsAllLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_LOCAL_STORAGE)\n    );\n\n    if (newsAllLocalStorage === null) {\n      localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify([newsObj]));\n      return;\n    }\n\n    if (newsAllLocalStorage !== null) {\n      for (const news of newsAllLocalStorage) {\n        if (news.link === newsObj.link) {\n          news.dateOfRead = dateOfRead;\n          return;\n        }\n      }\n\n      newsAllLocalStorage.push(newsObj);\n      localStorage.setItem(\n        KEY_LOCAL_STORAGE,\n        JSON.stringify(newsAllLocalStorage)\n      );\n    }\n  } catch (error) {\n    console.log('Error parse date local storage');\n  }\n}\n\nconst btnReadPage = document.querySelector('.read-page');\nconst listReadNews = document.querySelector('.readPage-list');\n\nbtnReadPage.addEventListener('click', makeArrNewsForPageRead);\n\nfunction makeArrNewsForPageRead() {\n  try {\n    const newsAllGetLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_LOCAL_STORAGE)\n    );\n    // console.log(newsAllGetLocalStorage);\n\n    const arrNewsIsRead = newsAllGetLocalStorage.reduce((arrNews, news) => {\n      if (news.isRead) {\n        arrNews.push(news);\n      }\n\n      return arrNews;\n    }, []);\n\n    makeMarkapPageRead(arrNewsIsRead);\n  } catch (error) {\n    const container = document.querySelector('.container');\n    container.innerHTML = getMarkupError();\n  }\n}\n\nfunction makeMarkapPageRead(arrayNewsRead) {\n  const allDates = arrayNewsRead\n    .flatMap(newsRead => newsRead.dateOfRead)\n    .filter((date, idx, arr) => arr.indexOf(date) === idx);\n\n  const markapDatesRead = allDates\n    .map(\n      data =>\n        `<li class=\"readPage-list__item\">${data}<ul class=\"readPage-list__list\"></ul></li>`\n    )\n    .join('');\n\n  listReadNews.insertAdjacentHTML('beforeend', markapDatesRead);\n  listReadNews.addEventListener('click', openListNews);\n\n  function openListNews(e) {\n    if (e.target.nodeName !== 'LI') {\n      return;\n    }\n\n    const cardDateRead = e.target;\n\n    const markapNewsAndDatesRead = arrayNewsRead.map(news => {\n      if (cardDateRead.textContent === news.dateOfRead) {\n        return `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"${news.img}\" alt=\"${news.alt}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${news.title}</h2>\n          <p class=\"news-item__text\">${news.text}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${news.date}</p>\n          <a href=\"${news.link}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`;\n      }\n    });\n\n    cardDateRead.firstElementChild.insertAdjacentHTML(\n      'beforeend',\n      markapNewsAndDatesRead\n    );\n  }\n}\n\n// function openListsReadNews(e) {\n//  cardDateRead.firstElementChild.classList.toggle('visually-hidden');\n// };\n","export function getMarkupError() {\n  return `<div class=\"error\">\n  <h2 class=\"error-text\">We haven’t found news from this category</h2>\n  <picture class=\"error-image\">\n    <source\n      srcset=\"\n        ./images-error/error_screen_min.png 1x,\n        ./images-error/error_screen_x2.png  2x\n      \"\n      media=\"(min-width: 1200px)\"\n    />\n    <source\n      srcset=\"\n        ./images-error/error_tablet_min.png 1x,\n        ./images-error/error_tablet_x2.png  2x\n      \"\n      media=\"(min-width: 768px)\"\n    />\n    <source\n      srcset=\"\n        ./images-error/error_mobile_min.png 1x,\n        ./images-error/error_mobile_x2.png  2x\n      \"\n      media=\"(max-width: 767px)\"\n    />\n    <img\n      src=\"./images-error/error_screen_min.png\"\n      alt=\"Error page\"\n      width=\"601\"\n    />\n  </picture>\n</div>`;\n}\n"],"names":["$103c6abfc3a0e310$var$URL","document","querySelector","addEventListener","async","arrNews","markapNews","map","headline","web_url","pub_date","snippet","multimedia","keywords","url","value","main","Date","toLocaleString","split","join","$103c6abfc3a0e310$var$listNews","insertAdjacentHTML","err","$103c6abfc3a0e310$var$makeNews","response","fetch","json","console","log","$103c6abfc3a0e310$var$onFetch","docs","error","e","preventDefault","target","nodeName","newsCard","parentNode","img","src","alt","title","textContent","text","date","link","href","dateOfRead","now","newsObj","isFavorite","isRead","newsAllLocalStorage","JSON","parse","localStorage","getItem","setItem","stringify","news","push","$103c6abfc3a0e310$var$btnReadPage","$103c6abfc3a0e310$var$listReadNews","newsAllGetLocalStorage","arrayNewsRead","markapDatesRead","flatMap","newsRead","filter","idx","arr","indexOf","data","openListNews","cardDateRead","markapNewsAndDatesRead","firstElementChild","$103c6abfc3a0e310$var$makeMarkapPageRead","reduce","innerHTML"],"version":3,"file":"read.4c6485d0.js.map"}