const e="https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=MCCbLUuNkLgrOf1uBr1c9zmSoKm3Mp9g";document.querySelector(".test-fetch").addEventListener("click",(async function(){try{!function(e){const n=e.map((({abstract:e,web_url:t,pub_date:n,snippet:s})=>`<li class="li-news">\n        <h2 class="title-news">${e}</h2>\n        <p class="text">${s}</p>\n        <p class="data">${n}</p>\n        <a href="${t}" class="link-news">\n            Read more...\n        </a>\n    </li>`)).join("");t.insertAdjacentHTML("beforeend",n)}((await async function(){try{const t=await fetch(e);return await t.json()}catch(e){console.log(e)}}()).response.docs)}catch(e){console.log(e)}}));const t=document.querySelector(".list-news");t.addEventListener("click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;const t=new Date(Date.now()).toLocaleString().split(",")[0],n=e.target.parentNode.innerHTML.trim();try{const e=JSON.parse(localStorage.getItem("read-news-storage"));if(null!==e)if(Object.keys(e).includes(t)){if(e[t].includes(n))return;e[t].push(n),localStorage.setItem("read-news-storage",JSON.stringify(e))}else e[t]=[n],localStorage.setItem("read-news-storage",JSON.stringify(e));else{const e={};e[t]=[n],console.log(e),localStorage.setItem("read-news-storage",JSON.stringify(e))}}catch(e){console.log("err parse")}}));document.querySelector(".read-page").addEventListener("click",(function(){try{const e=JSON.parse(localStorage.getItem("read-news-storage"));for(key in e){const t=`<li class="list-date">${key}<ul class="list-date-read visually-hidden"></ul></li>`;n.insertAdjacentHTML("beforeend",t);document.querySelector(".list-date");const s=document.querySelector(".list-date-read");for(let t=0;t<e[key].length;t+=1){const n=e[key][t];console.log(n);const c=`<li class="li-news">${n}</li>`;s.insertAdjacentHTML("beforeend",c)}}}catch(e){console.log(e)}}));const n=document.querySelector(".list-read-news");n.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;const t=e.target.children;for(const e of t)e.classList.toggle("visually-hidden")}));
//# sourceMappingURL=read.2c252324.js.map
