{"mappings":"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","sources":["src/js/read.js","src/js/error.js"],"sourcesContent":["import { getMarkupError } from './error';\nimport { isFavoriteForStyle, isReadForStyle } from './favoriteReadStyles';\n// isReadForStyle(\"https://www.nytimes.com/2023/03/06/travel/taliesin-frank-lloyd-wright-wisconsin-baking-class.html\");\n// isReadForStyle(\"https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByPages\");\n// isFavoriteForStyle(\"https://www.nytimes.com/2023/03/06/travel/taliesin-frank-lloyd-wright-wisconsin-baking-class.html\");\n// isReadForStyle(\"https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollByPages\");\n\n// =======================  FOR TEST ==============================\n\nconst URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=MCCbLUuNkLgrOf1uBr1c9zmSoKm3Mp9g`;\nconst btnFetch = document.querySelector('.test-fetch');\n\nbtnFetch.addEventListener('click', onOpenNews);\n\nasync function onFetch() {\n  try {\n    const response = await fetch(URL);\n    const newsAll = await response.json();\n    return newsAll;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onOpenNews() {\n  try {\n    const newsAll = await onFetch();\n    makeNews(newsAll.response.docs);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction makeNews(arrNews) {\n  try {\n    const markapNews = arrNews\n      .map(\n        ({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n          `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://www.nytimes.com/${\n          multimedia[2].url\n        }\" alt=\"${keywords[0].value}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${\n            new Date(pub_date).toLocaleString().split(',')[0]\n          }</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`\n      )\n      .join('');\n    listNews.insertAdjacentHTML('beforeend', markapNews);\n  } catch (err) {\n    const markapNews = arrNews\n      .map(\n        ({ headline, web_url, pub_date, snippet, multimedia, keywords }) =>\n          `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"https://cdn.pixabay.com/photo/2015/02/15/09/33/news-636978_960_720.jpg\" alt=\"${\n          keywords[0].value\n        }\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${headline.main}</h2>\n          <p class=\"news-item__text\">${snippet}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${\n            new Date(pub_date).toLocaleString().split(',')[0]\n          }</p>\n          <a href=\"${web_url}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`\n      )\n      .join('');\n    listNews.insertAdjacentHTML('beforeend', markapNews);\n  }\n}\n\n// =======================  FOR TEST ==============================\n\nconst KEY_LOCAL_STORAGE = 'read-news-local-storage';\nconst listNews = document.querySelector('.list-news');\n\nfunction createNewData() {\n  return new Date(Date.now()).toLocaleString().split(',')[0];\n}\n\nlistNews.addEventListener('click', onBtnReadMore);\n\nfunction onBtnReadMore(e) {\n  // =======================  FOR TEST ==============================\n  e.preventDefault();\n  // =======================  FOR TEST ==============================\n\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n  // makeObjectNews(e);\n  let newsCard = e.target.parentNode.parentNode;\n  let img = newsCard.querySelector('.news-item__img').src;\n  let alt = newsCard.querySelector('.news-item__img').alt;\n  let title = newsCard.querySelector('.news-item__title').textContent;\n  let text = newsCard.querySelector('.news-item__text').textContent;\n  let date = newsCard.querySelector('.news-item__date').textContent;\n  let link = newsCard.querySelector('.news-item__link').href;\n  let dateOfRead = createNewData();\n\n  const newsObj = {\n    img,\n    alt,\n    title,\n    text,\n    date,\n    link,\n\n    isFavorite: false,\n    isRead: true,\n    dateOfRead,\n  };\n\n  try {\n    const newsAllLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_LOCAL_STORAGE)\n    );\n\n    if (newsAllLocalStorage === null) {\n      localStorage.setItem(KEY_LOCAL_STORAGE, JSON.stringify([newsObj]));\n      return;\n    }\n\n    if (newsAllLocalStorage !== null) {\n      for (const news of newsAllLocalStorage) {\n        if (news.link === newsObj.link) {\n          news.dateOfRead = dateOfRead;\n          return;\n        }\n      }\n\n      newsAllLocalStorage.push(newsObj);\n      localStorage.setItem(\n        KEY_LOCAL_STORAGE,\n        JSON.stringify(newsAllLocalStorage)\n      );\n    }\n  } catch (error) {\n    console.log('Error parse date local storage');\n  }\n}\n\nconst btnReadPage = document.querySelector('.read-page');\nconst listReadNews = document.querySelector('.readPage-list');\n\nbtnReadPage.addEventListener('click', makeArrNewsForPageRead);\n\nfunction makeArrNewsForPageRead() {\n  try {\n    const newsAllGetLocalStorage = JSON.parse(\n      localStorage.getItem(KEY_LOCAL_STORAGE)\n    );\n    // console.log(newsAllGetLocalStorage);\n\n    const arrNewsIsRead = newsAllGetLocalStorage.reduce((arrNews, news) => {\n      if (news.isRead) {\n        arrNews.push(news);\n      }\n\n      return arrNews;\n    }, []);\n\n    makeMarkapPageRead(arrNewsIsRead);\n  } catch (error) {\n    const container = document.querySelector('.container');\n    container.innerHTML = getMarkupError();\n  }\n}\n\nfunction makeMarkapPageRead(arrayNewsRead) {\n  const allDates = arrayNewsRead\n    .flatMap(newsRead => newsRead.dateOfRead)\n    .filter((date, idx, arr) => arr.indexOf(date) === idx);\n\n  const markapDatesRead = allDates\n    .map(\n      data =>\n        `<li class=\"readPage-list__item\">${data}<ul class=\"readPage-list__list\"></ul></li>`\n    )\n    .join('');\n\n  listReadNews.insertAdjacentHTML('beforeend', markapDatesRead);\n  listReadNews.addEventListener('click', openListNews);\n\n  function openListNews(e) {\n    if (e.target.nodeName !== 'LI') {\n      return;\n    }\n\n    const cardDateRead = e.target;\n\n    const markapNewsAndDatesRead = arrayNewsRead.map(news => {\n      if (cardDateRead.textContent === news.dateOfRead) {\n        return `<li class=\"news-item\">\n        <img class=\"news-item__img\" src=\"${news.img}\" alt=\"${news.alt}\">\n        <div class=\"news-item__buttons\">\n         <button type=\"button\" class=\"news-item__btn\">Add to favorite</button>\n         <button type=\"button\" class=\"news-item__category\">Job searching </button>\n        </div>\n        <div class=\"news-item__wrapper-text\">\n          <h2 class=\"news-item__title\">${news.title}</h2>\n          <p class=\"news-item__text\">${news.text}</p>\n        </div>\n        <div class=\"news-item__wrapper-date\">\n          <p class=\"news-item__date\">${news.date}</p>\n          <a href=\"${news.link}\" class=\"news-item__link\">Read more</a>\n        </div>\n        </li>`;\n      }\n    });\n\n    cardDateRead.firstElementChild.insertAdjacentHTML(\n      'beforeend',\n      markapNewsAndDatesRead\n    );\n  }\n}\n\n// function openListsReadNews(e) {\n//  cardDateRead.firstElementChild.classList.toggle('visually-hidden');\n// };\n","export function getMarkupError() {\n  return `<div class=\"error\">\n  <h2 class=\"error-text\">We haven’t found news from this category</h2>\n  <picture class=\"error-image\">\n    <source\n      srcset=\"\n        ./images-error/error_screen_min.png 1x,\n        ./images-error/error_screen_x2.png  2x\n      \"\n      media=\"(min-width: 1200px)\"\n    />\n    <source\n      srcset=\"\n        ./images-error/error_tablet_min.png 1x,\n        ./images-error/error_tablet_x2.png  2x\n      \"\n      media=\"(min-width: 768px)\"\n    />\n    <source\n      srcset=\"\n        ./images-error/error_mobile_min.png 1x,\n        ./images-error/error_mobile_x2.png  2x\n      \"\n      media=\"(max-width: 767px)\"\n    />\n    <img\n      src=\"./images-error/error_screen_min.png\"\n      alt=\"Error page\"\n      width=\"601\"\n    />\n  </picture>\n</div>`;\n}\n"],"names":["$bpxeT","parcelRequire","$95b4463fc8ac9448$var$URL","$95b4463fc8ac9448$var$onFetch","$95b4463fc8ac9448$var$_onFetch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","newsAll","fetch","_ctx","sent","json","console","log","t0","$95b4463fc8ac9448$var$_onOpenNews","$95b4463fc8ac9448$var$makeNews","docs","arrNews","markapNews","map","param","headline","web_url","pub_date","snippet","multimedia","keywords","concat","url","value","main","Date","toLocaleString","split","join","$95b4463fc8ac9448$var$listNews","insertAdjacentHTML","err","markapNews1","document","querySelector","addEventListener","$95b4463fc8ac9448$var$KEY_LOCAL_STORAGE","e","preventDefault","target","nodeName","newsCard","parentNode","img","src","alt","title","textContent","text","date","link","href","dateOfRead","now","newsObj","isFavorite","isRead","newsAllLocalStorage","JSON","parse","localStorage","getItem","setItem","stringify","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","news","return","push","error","$95b4463fc8ac9448$var$btnReadPage","$95b4463fc8ac9448$var$listReadNews","arrayNewsRead","markapDatesRead","flatMap","newsRead","filter","idx","arr","indexOf","data","openListNews","cardDateRead","markapNewsAndDatesRead","firstElementChild","$95b4463fc8ac9448$var$makeMarkapPageRead","reduce","innerHTML"],"version":3,"file":"read.38de1d91.js.map"}